{"id":"Jj31","dependencies":[{"name":"/Users/evinsellin/code/homepage/tsconfig.json","includedInParent":true,"mtime":1618121163129},{"name":"/Users/evinsellin/code/homepage/.babelrc","includedInParent":true,"mtime":1618113312087},{"name":"/Users/evinsellin/code/homepage/package.json","includedInParent":true,"mtime":1618121380722},{"name":"./constants","loc":{"line":1,"column":32},"parent":"/Users/evinsellin/code/homepage/src/vm/os/process.ts","resolved":"/Users/evinsellin/code/homepage/src/vm/os/constants.ts"},{"name":"./sandbox","loc":{"line":2,"column":25},"parent":"/Users/evinsellin/code/homepage/src/vm/os/process.ts","resolved":"/Users/evinsellin/code/homepage/src/vm/os/sandbox.js"},{"name":"./syscalls","loc":{"line":3,"column":41},"parent":"/Users/evinsellin/code/homepage/src/vm/os/process.ts","resolved":"/Users/evinsellin/code/homepage/src/vm/os/syscalls.ts"},{"name":"process","parent":"/Users/evinsellin/code/homepage/src/vm/os/process.ts","resolved":"/Users/evinsellin/code/homepage/node_modules/process/browser.js"}],"generated":{"js":"var process = require(\"process\");\nvar t=require(\"process\");Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=void 0;var e=require(\"./constants\"),r=o(require(\"./sandbox\")),n=i(require(\"./syscalls\"));function s(){if(\"function\"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function i(t){if(t&&t.__esModule)return t;if(null===t||\"object\"!=typeof t&&\"function\"!=typeof t)return{default:t};var e=s();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=n?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}function o(t){return t&&t.__esModule?t:{default:t}}var u=function(t){return Object.keys(n.default).map(function(r){return{key:r,cb:function(s,i){var o=function(){return n.default[r](s,t,(o=i,function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];t.status===e.ProcStatus.RUNNING&&o&&o.apply(void 0,r)}));var o};n.syscallSchemas[r]?n.syscallSchemas[r].isValid(s).then(function(t){if(!t)return console.error(\"Schema validation failed for \"+r+\": \"+JSON.stringify(s)),void i(e.Err.EVALIDATION);o()}):o()}}}).reduce(function(t,e){var r,n=e.key,s=e.cb;return Object.assign(t,((r={})[n]=s,r))},{})},a=function(){function t(t,r,n,s,i,o,u){this.fds=[r.filesystem.getFolderFile(\"/dev/tty\"),r.filesystem.getFolderFile(\"/dev/tty\"),r.filesystem.getFolderFile(\"/dev/tty\")],this.source=n,this.os=r,this.status=e.ProcStatus.PENDING,this.onTerminate=s,this.env=i,this.user=t,this.cwd=o,this.args=u}return t.prototype.start=function(){var t=u(this);this.status=e.ProcStatus.RUNNING,(0,r.default)(this.source,t,this.args,this.env)},t.prototype.terminate=function(t){this.status=e.ProcStatus.STOPPED,this.onTerminate(t)},t}(),c=a;exports.default=c;"},"sourceMaps":{"js":{"mappings":[{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":0}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":4}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":6}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":14}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":25}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":32}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":47}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":55}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":68}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":69}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":76}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":80}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":88}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":101}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":2,"column":103}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":2,"column":107}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":2,"column":109}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":2,"column":117}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":2,"column":132}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":2,"column":134}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":2,"column":136}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":2,"column":144}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":2,"column":158}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":2,"column":160}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":2,"column":162}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":2,"column":170}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":185}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":194}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":198}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":201}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":220}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":228}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":235}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":240}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":244}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":246}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":250}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":258}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":265}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":267}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":278}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":285}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":288}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":290}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":299}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":301}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":304}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":307}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":310}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":312}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":323}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":330}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":332}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":335}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":342}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":345}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":362}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":365}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":384}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":386}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":392}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":393}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":401}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":404}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":408}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":410}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":414}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":417}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":420}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":422}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":426}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":429}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":436}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":438}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":442}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":445}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":449}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":451}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":454}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":456}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":463}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":479}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":486}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":511}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":515}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":519}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":524}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":526}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":529}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":536}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":546}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":561}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":566}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":568}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":571}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":572}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":576}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":578}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":580}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":587}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":612}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":614}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":617}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":622}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":626}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":628}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":633}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":635}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":640}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":647}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":662}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":664}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":666}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":669}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":671}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":674}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":676}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":679}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":686}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":688}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":696}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":698}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":701}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":703}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":707}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":709}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":712}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":714}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":723}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":725}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":728}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":735}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":738}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":740}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":751}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":753}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":754}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":762}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":2,"column":765}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":7,"column":6},"generated":{"line":2,"column":769}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":7,"column":23},"generated":{"line":2,"column":771}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":7,"column":23},"generated":{"line":2,"column":780}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":14,"column":9},"generated":{"line":2,"column":783}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":14,"column":9},"generated":{"line":2,"column":790}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":15,"column":5},"generated":{"line":2,"column":797}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":15,"column":10},"generated":{"line":2,"column":802}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":14,"column":9},"generated":{"line":2,"column":804}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":16,"column":5},"generated":{"line":2,"column":813}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":16,"column":9},"generated":{"line":2,"column":817}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":16,"column":9},"generated":{"line":2,"column":826}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":16,"column":17},"generated":{"line":2,"column":829}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":16,"column":17},"generated":{"line":2,"column":835}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":17,"column":8},"generated":{"line":2,"column":836}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":17,"column":11},"generated":{"line":2,"column":840}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":18,"column":8},"generated":{"line":2,"column":842}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":18,"column":12},"generated":{"line":2,"column":845}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":18,"column":13},"generated":{"line":2,"column":854}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":18,"column":18},"generated":{"line":2,"column":856}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":19,"column":14},"generated":{"line":2,"column":859}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":19,"column":14},"generated":{"line":2,"column":863}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":19,"column":28},"generated":{"line":2,"column":865}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":19,"column":34},"generated":{"line":2,"column":876}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":19,"column":34},"generated":{"line":2,"column":883}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":19,"column":43},"generated":{"line":2,"column":885}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":19,"column":43},"generated":{"line":2,"column":893}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":19,"column":48},"generated":{"line":2,"column":896}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":19,"column":53},"generated":{"line":2,"column":898}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":8,"column":24},"generated":{"line":2,"column":901}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":19,"column":76},"generated":{"line":2,"column":903}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":8,"column":30},"generated":{"line":2,"column":905}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":8,"column":31},"generated":{"line":2,"column":916}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":8,"column":31},"generated":{"line":2,"column":920}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":8,"column":31},"generated":{"line":2,"column":924}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":8,"column":31},"generated":{"line":2,"column":926}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":8,"column":31},"generated":{"line":2,"column":929}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":8,"column":31},"generated":{"line":2,"column":931}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":8,"column":31},"generated":{"line":2,"column":933}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":8,"column":31},"generated":{"line":2,"column":935}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":8,"column":31},"generated":{"line":2,"column":945}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":8,"column":31},"generated":{"line":2,"column":952}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":8,"column":31},"generated":{"line":2,"column":956}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":8,"column":31},"generated":{"line":2,"column":958}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":8,"column":31},"generated":{"line":2,"column":961}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":8,"column":31},"generated":{"line":2,"column":971}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":9,"column":8},"generated":{"line":2,"column":974}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":9,"column":16},"generated":{"line":2,"column":976}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":9,"column":27},"generated":{"line":2,"column":985}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":9,"column":38},"generated":{"line":2,"column":987}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":9,"column":38},"generated":{"line":2,"column":998}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":9,"column":49},"generated":{"line":2,"column":1007}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":10,"column":6},"generated":{"line":2,"column":1010}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":10,"column":8},"generated":{"line":2,"column":1012}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":10,"column":8},"generated":{"line":2,"column":1023}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":10,"column":12},"generated":{"line":2,"column":1025}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":8,"column":24},"generated":{"line":2,"column":1031}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":8,"column":24},"generated":{"line":2,"column":1035}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":22,"column":14},"generated":{"line":2,"column":1038}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":22,"column":29},"generated":{"line":2,"column":1040}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":22,"column":29},"generated":{"line":2,"column":1055}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":23,"column":27},"generated":{"line":2,"column":1058}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":23,"column":27},"generated":{"line":2,"column":1060}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":23,"column":27},"generated":{"line":2,"column":1075}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":24,"column":15},"generated":{"line":2,"column":1078}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":24,"column":23},"generated":{"line":2,"column":1086}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":25,"column":15},"generated":{"line":2,"column":1089}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":25,"column":20},"generated":{"line":2,"column":1094}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":25,"column":20},"generated":{"line":2,"column":1103}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":28,"column":20},"generated":{"line":2,"column":1106}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":28,"column":21},"generated":{"line":2,"column":1110}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":31,"column":18},"generated":{"line":2,"column":1112}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":29,"column":18},"generated":{"line":2,"column":1119}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":29,"column":26},"generated":{"line":2,"column":1127}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":29,"column":32},"generated":{"line":2,"column":1133}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":29,"column":64},"generated":{"line":2,"column":1165}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":29,"column":67},"generated":{"line":2,"column":1167}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":29,"column":72},"generated":{"line":2,"column":1172}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":29,"column":77},"generated":{"line":2,"column":1177}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":29,"column":87},"generated":{"line":2,"column":1187}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":30,"column":18},"generated":{"line":2,"column":1196}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":30,"column":21},"generated":{"line":2,"column":1198}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":30,"column":25},"generated":{"line":2,"column":1200}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":30,"column":25},"generated":{"line":2,"column":1204}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":33,"column":16},"generated":{"line":2,"column":1217}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":36,"column":12},"generated":{"line":2,"column":1223}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":39,"column":8},"generated":{"line":2,"column":1231}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":40,"column":6},"generated":{"line":2,"column":1238}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":40,"column":7},"generated":{"line":2,"column":1247}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":40,"column":12},"generated":{"line":2,"column":1249}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":1252}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":1256}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":40,"column":13},"generated":{"line":2,"column":1258}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":40,"column":16},"generated":{"line":2,"column":1260}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":40,"column":16},"generated":{"line":2,"column":1262}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":40,"column":18},"generated":{"line":2,"column":1266}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":40,"column":20},"generated":{"line":2,"column":1268}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":40,"column":20},"generated":{"line":2,"column":1270}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":40,"column":26},"generated":{"line":2,"column":1273}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":40,"column":26},"generated":{"line":2,"column":1280}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":40,"column":33},"generated":{"line":2,"column":1287}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":40,"column":40},"generated":{"line":2,"column":1294}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":40,"column":43},"generated":{"line":2,"column":1298}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":40,"column":43},"generated":{"line":2,"column":1300}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":40,"column":48},"generated":{"line":2,"column":1304}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":40,"column":54},"generated":{"line":2,"column":1307}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":40,"column":56},"generated":{"line":2,"column":1309}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":41,"column":6},"generated":{"line":2,"column":1314}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":45,"column":0},"generated":{"line":2,"column":1319}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":45,"column":0},"generated":{"line":2,"column":1321}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":56,"column":2},"generated":{"line":2,"column":1332}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":56,"column":2},"generated":{"line":2,"column":1341}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":57,"column":4},"generated":{"line":2,"column":1343}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":58,"column":4},"generated":{"line":2,"column":1345}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":59,"column":4},"generated":{"line":2,"column":1347}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":60,"column":4},"generated":{"line":2,"column":1349}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":61,"column":4},"generated":{"line":2,"column":1351}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":62,"column":4},"generated":{"line":2,"column":1353}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":63,"column":4},"generated":{"line":2,"column":1355}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":65,"column":9},"generated":{"line":2,"column":1358}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":65,"column":9},"generated":{"line":2,"column":1363}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":65,"column":15},"generated":{"line":2,"column":1367}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":66,"column":6},"generated":{"line":2,"column":1368}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":66,"column":9},"generated":{"line":2,"column":1370}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":66,"column":20},"generated":{"line":2,"column":1381}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":66,"column":34},"generated":{"line":2,"column":1395}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":67,"column":6},"generated":{"line":2,"column":1407}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":67,"column":9},"generated":{"line":2,"column":1409}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":67,"column":20},"generated":{"line":2,"column":1420}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":67,"column":34},"generated":{"line":2,"column":1434}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":68,"column":6},"generated":{"line":2,"column":1446}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":68,"column":9},"generated":{"line":2,"column":1448}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":68,"column":20},"generated":{"line":2,"column":1459}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":68,"column":34},"generated":{"line":2,"column":1473}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":70,"column":9},"generated":{"line":2,"column":1486}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":70,"column":9},"generated":{"line":2,"column":1491}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":70,"column":18},"generated":{"line":2,"column":1498}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":71,"column":9},"generated":{"line":2,"column":1500}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":71,"column":9},"generated":{"line":2,"column":1505}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":71,"column":14},"generated":{"line":2,"column":1508}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":72,"column":9},"generated":{"line":2,"column":1510}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":72,"column":9},"generated":{"line":2,"column":1515}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":72,"column":18},"generated":{"line":2,"column":1522}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":72,"column":29},"generated":{"line":2,"column":1524}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":72,"column":29},"generated":{"line":2,"column":1535}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":73,"column":9},"generated":{"line":2,"column":1543}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":73,"column":9},"generated":{"line":2,"column":1548}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":73,"column":23},"generated":{"line":2,"column":1560}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":74,"column":9},"generated":{"line":2,"column":1562}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":74,"column":9},"generated":{"line":2,"column":1567}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":74,"column":15},"generated":{"line":2,"column":1571}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":75,"column":9},"generated":{"line":2,"column":1573}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":75,"column":9},"generated":{"line":2,"column":1578}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":75,"column":16},"generated":{"line":2,"column":1583}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":76,"column":9},"generated":{"line":2,"column":1585}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":76,"column":9},"generated":{"line":2,"column":1590}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":76,"column":15},"generated":{"line":2,"column":1594}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":77,"column":9},"generated":{"line":2,"column":1596}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":77,"column":9},"generated":{"line":2,"column":1601}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":77,"column":16},"generated":{"line":2,"column":1606}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":90,"column":0},"generated":{"line":2,"column":1608}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":80,"column":2},"generated":{"line":2,"column":1615}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":80,"column":2},"generated":{"line":2,"column":1617}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":80,"column":2},"generated":{"line":2,"column":1627}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":80,"column":2},"generated":{"line":2,"column":1633}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":81,"column":10},"generated":{"line":2,"column":1644}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":81,"column":10},"generated":{"line":2,"column":1648}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":81,"column":21},"generated":{"line":2,"column":1650}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":81,"column":36},"generated":{"line":2,"column":1652}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":82,"column":9},"generated":{"line":2,"column":1658}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":82,"column":9},"generated":{"line":2,"column":1663}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":82,"column":18},"generated":{"line":2,"column":1670}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":82,"column":29},"generated":{"line":2,"column":1672}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":82,"column":29},"generated":{"line":2,"column":1683}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":83,"column":17},"generated":{"line":2,"column":1692}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":83,"column":17},"generated":{"line":2,"column":1694}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":83,"column":17},"generated":{"line":2,"column":1696}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":83,"column":17},"generated":{"line":2,"column":1705}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":83,"column":22},"generated":{"line":2,"column":1710}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":83,"column":30},"generated":{"line":2,"column":1717}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":83,"column":40},"generated":{"line":2,"column":1719}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":83,"column":45},"generated":{"line":2,"column":1724}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":83,"column":51},"generated":{"line":2,"column":1729}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":83,"column":56},"generated":{"line":2,"column":1734}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":86,"column":2},"generated":{"line":2,"column":1740}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":86,"column":2},"generated":{"line":2,"column":1742}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":86,"column":2},"generated":{"line":2,"column":1752}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":86,"column":2},"generated":{"line":2,"column":1762}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":86,"column":13},"generated":{"line":2,"column":1771}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":87,"column":9},"generated":{"line":2,"column":1774}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":87,"column":9},"generated":{"line":2,"column":1779}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":87,"column":18},"generated":{"line":2,"column":1786}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":87,"column":29},"generated":{"line":2,"column":1788}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":87,"column":29},"generated":{"line":2,"column":1799}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":88,"column":9},"generated":{"line":2,"column":1807}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":88,"column":9},"generated":{"line":2,"column":1812}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":88,"column":21},"generated":{"line":2,"column":1824}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":90,"column":0},"generated":{"line":2,"column":1828}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":45,"column":0},"generated":{"line":2,"column":1830}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":1833}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":1835}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":1837}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":1845}},{"source":"src/vm/os/process.ts","name":null,"original":{"line":92,"column":15},"generated":{"line":2,"column":1853}}],"sources":{"src/vm/os/process.ts":"import { ProcStatus, FolderFile, Err } from './constants';\nimport OS from './os';\nimport User from './user';\nimport runInSandbox from './sandbox';\nimport syscalls, { syscallSchemas } from './syscalls';\n\nconst configSyscalls = process => {\n  const ensureRunning = cb => (...args) => {\n    if (process.status === ProcStatus.RUNNING && cb) {\n      cb(...args);\n    }\n  };\n\n  return Object\n    .keys(syscalls)\n    .map(key => ({\n        key, \n        cb: (arg, cb) => {\n          let execSyscall = () => syscalls[key](arg, process, ensureRunning(cb));\n          // if there's a schema for the syscall\n          // check that it makes sense\n          if (syscallSchemas[key]) {\n            syscallSchemas[key]\n              .isValid(arg)\n              .then(isValid => {\n                // TODO: Make this actually fail with an error.\n                // we should put error in the first arg, because otherwise, this is silly.\n                if (!isValid) {\n                  console.error(`Schema validation failed for ${key}: ${JSON.stringify(arg)}`);\n                  cb(Err.EVALIDATION);\n                  return;\n                }\n                execSyscall();\n              });\n          } else {\n            execSyscall();\n          }\n        },\n    })).reduce(\n      (acc, {key, cb}) => Object.assign(acc, { [key]: cb }),\n      {}\n    );\n};\n\nclass Process {\n  os : OS;\n  source : string;\n  status : ProcStatus;\n  onTerminate : any;\n  user : User;\n  cwd : string;\n  env : object;\n  args : Array<string>;\n  fds : Array<FolderFile>; // Should be actual files.\n\n  constructor(\n    user : User,\n    os : OS,\n    source : string,\n    onTerminate,\n    env : object,\n    cwd : string,\n    args : Array<string>,\n  ) {\n    this.fds = [\n      os.filesystem.getFolderFile('/dev/tty'), //stdin\n      os.filesystem.getFolderFile('/dev/tty'), //stdout\n      os.filesystem.getFolderFile('/dev/tty'), //stderr\n    ];\n    this.source = source;\n    this.os = os;\n    this.status = ProcStatus.PENDING;\n    this.onTerminate = onTerminate;\n    this.env = env;\n    this.user = user;\n    this.cwd = cwd;\n    this.args = args;\n  }\n\n  start(){\n    const syscalls = configSyscalls(this);\n    this.status = ProcStatus.RUNNING;\n    runInSandbox(this.source, syscalls, this.args, this.env);\n  }\n\n  terminate (exitCode) {\n    this.status = ProcStatus.STOPPED;\n    this.onTerminate(exitCode);\n  }\n}\n\nexport default Process;"},"lineCount":null}},"error":null,"hash":"cc4fa285c4ba28ebdf4559fb1c164811","cacheData":{"env":{}}}